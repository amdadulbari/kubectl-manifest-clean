# Krew plugin manifest for kubectl-manifest-clean.
# Submit to krew-index by copying this file to plugins/manifest-clean.yaml
# and updating sha256 for each platform from the GitHub Release checksums.txt.
apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: manifest-clean
spec:
  version: v1.0.0
  shortDescription: Make Kubernetes manifests deterministic and diff-friendly
  homepage: https://github.com/amdadulbari/kubectl-manifest-clean
  description: |
    Canonical sorting of keys, removal of noisy fields (status, managedFields,
    runtime metadata), and optional empty map/list pruning. Use for GitOps
    diff noise reduction. Arrays are not reordered.
  caveats: |
    Usage:
      $ kubectl manifest-clean [PATH|-] [flags]

    For additional options:
      $ kubectl manifest-clean --help
  platforms:
    - selector:
        matchLabels:
          os: linux
          arch: amd64
      uri: https://github.com/amdadulbari/kubectl-manifest-clean/releases/download/v1.0.0/kubectl-manifest-clean_v1.0.0_linux_amd64.tar.gz
      sha256: PLACEHOLDER_REPLACE_WITH_RELEASE_CHECKSUM
      files:
        - from: kubectl-manifest-clean
          to: .
        - from: LICENSE
          to: .
      bin: kubectl-manifest-clean
    - selector:
        matchLabels:
          os: linux
          arch: arm64
      uri: https://github.com/amdadulbari/kubectl-manifest-clean/releases/download/v1.0.0/kubectl-manifest-clean_v1.0.0_linux_arm64.tar.gz
      sha256: PLACEHOLDER_REPLACE_WITH_RELEASE_CHECKSUM
      files:
        - from: kubectl-manifest-clean
          to: .
        - from: LICENSE
          to: .
      bin: kubectl-manifest-clean
    - selector:
        matchLabels:
          os: darwin
          arch: amd64
      uri: https://github.com/amdadulbari/kubectl-manifest-clean/releases/download/v1.0.0/kubectl-manifest-clean_v1.0.0_darwin_amd64.tar.gz
      sha256: PLACEHOLDER_REPLACE_WITH_RELEASE_CHECKSUM
      files:
        - from: kubectl-manifest-clean
          to: .
        - from: LICENSE
          to: .
      bin: kubectl-manifest-clean
    - selector:
        matchLabels:
          os: darwin
          arch: arm64
      uri: https://github.com/amdadulbari/kubectl-manifest-clean/releases/download/v1.0.0/kubectl-manifest-clean_v1.0.0_darwin_arm64.tar.gz
      sha256: PLACEHOLDER_REPLACE_WITH_RELEASE_CHECKSUM
      files:
        - from: kubectl-manifest-clean
          to: .
        - from: LICENSE
          to: .
      bin: kubectl-manifest-clean
    - selector:
        matchLabels:
          os: windows
          arch: amd64
      uri: https://github.com/amdadulbari/kubectl-manifest-clean/releases/download/v1.0.0/kubectl-manifest-clean_v1.0.0_windows_amd64.zip
      sha256: PLACEHOLDER_REPLACE_WITH_RELEASE_CHECKSUM
      files:
        - from: kubectl-manifest-clean.exe
          to: .
        - from: LICENSE
          to: .
      bin: kubectl-manifest-clean.exe
