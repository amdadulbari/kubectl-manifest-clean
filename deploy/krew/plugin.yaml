# Krew plugin manifest for kubectl-manifest-clean.
# Submit to krew-index by copying this file to plugins/manifest-clean.yaml
# and updating sha256 for each platform from the GitHub Release checksums.txt.
apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: manifest-clean
spec:
  version: v1.0.0
  shortDescription: Make Kubernetes manifests deterministic and diff-friendly
  homepage: https://github.com/amdadulbari/kubectl-manifest-clean
  description: |
    Canonical sorting of keys, removal of noisy fields (status, managedFields,
    runtime metadata), and optional empty map/list pruning. Use for GitOps
    diff noise reduction. Arrays are not reordered.
  caveats: |
    Usage:
      $ kubectl manifest-clean [PATH|-] [flags]

    For additional options:
      $ kubectl manifest-clean --help
  platforms:
    - selector:
        matchLabels:
          os: linux
          arch: amd64
      uri: https://github.com/amdadulbari/kubectl-manifest-clean/releases/download/v1.0.0/kubectl-manifest-clean_v1.0.0_linux_amd64.tar.gz
      sha256: 2ab46c6d9a7fb579d65f6c0f6d3b0bf4d4fb4f2ca9995d5b6ba31caabdb81e60
      files:
        - from: kubectl-manifest-clean
          to: .
        - from: LICENSE
          to: .
      bin: kubectl-manifest-clean
    - selector:
        matchLabels:
          os: linux
          arch: arm64
      uri: https://github.com/amdadulbari/kubectl-manifest-clean/releases/download/v1.0.0/kubectl-manifest-clean_v1.0.0_linux_arm64.tar.gz
      sha256: 386f36b4d03212da04ed344c78280f9dcd870ee7e55f1dd61f7deea44905bd60
      files:
        - from: kubectl-manifest-clean
          to: .
        - from: LICENSE
          to: .
      bin: kubectl-manifest-clean
    # darwin/arm64 only; Intel Mac users can build from source
    - selector:
        matchLabels:
          os: darwin
          arch: arm64
      uri: https://github.com/amdadulbari/kubectl-manifest-clean/releases/download/v1.0.0/kubectl-manifest-clean_v1.0.0_darwin_arm64.tar.gz
      sha256: 4bd255eb823afe3a0bef9c382b4ea819c5bb0e5bb41ae2eafe0834e5d0f616f5
      files:
        - from: kubectl-manifest-clean
          to: .
        - from: LICENSE
          to: .
      bin: kubectl-manifest-clean
    - selector:
        matchLabels:
          os: windows
          arch: amd64
      uri: https://github.com/amdadulbari/kubectl-manifest-clean/releases/download/v1.0.0/kubectl-manifest-clean_v1.0.0_windows_amd64.zip
      sha256: 2a992e0896c10bfc4353b4ed933a6d54a08a735543cf8a927eb45284cb516a75
      files:
        - from: kubectl-manifest-clean.exe
          to: .
        - from: LICENSE
          to: .
      bin: kubectl-manifest-clean.exe
