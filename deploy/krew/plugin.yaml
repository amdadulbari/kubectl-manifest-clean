# Krew plugin manifest for kubectl-manifest-clean.
# Submit to krew-index by copying this file to plugins/manifest-clean.yaml
# and updating sha256 for each platform from the GitHub Release checksums.txt.
apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: manifest-clean
spec:
  version: v1.0.0
  shortDescription: Make Kubernetes manifests deterministic and diff-friendly
  homepage: https://github.com/amdadulbari/kubectl-manifest-clean
  description: |
    Canonical sorting of keys, removal of noisy fields (status, managedFields,
    runtime metadata), and optional empty map/list pruning. Use for GitOps
    diff noise reduction. Arrays are not reordered.
  caveats: |
    Usage:
      $ kubectl manifest-clean [PATH|-] [flags]

    For additional options:
      $ kubectl manifest-clean --help
  platforms:
    - selector:
        matchLabels:
          os: linux
          arch: amd64
      uri: https://github.com/amdadulbari/kubectl-manifest-clean/releases/download/v1.0.0/kubectl-manifest-clean_v1.0.0_linux_amd64.tar.gz
      sha256: b119eab2155a75475477ecef1c4e770826106c93bf463037aeea7b622ccec020
      files:
        - from: kubectl-manifest-clean
          to: .
        - from: LICENSE
          to: .
      bin: kubectl-manifest-clean
    - selector:
        matchLabels:
          os: linux
          arch: arm64
      uri: https://github.com/amdadulbari/kubectl-manifest-clean/releases/download/v1.0.0/kubectl-manifest-clean_v1.0.0_linux_arm64.tar.gz
      sha256: 8118639de26db737ea374b41a4d64289b8dfdb14aef6477fa7c22a2e121af9d8
      files:
        - from: kubectl-manifest-clean
          to: .
        - from: LICENSE
          to: .
      bin: kubectl-manifest-clean
    # darwin/arm64 only; Intel Mac users can build from source
    - selector:
        matchLabels:
          os: darwin
          arch: arm64
      uri: https://github.com/amdadulbari/kubectl-manifest-clean/releases/download/v1.0.0/kubectl-manifest-clean_v1.0.0_darwin_arm64.tar.gz
      sha256: 4441ccdb4d308d2615130beae9b79ff303fff8bbf58bddd52d81fd6732e40428
      files:
        - from: kubectl-manifest-clean
          to: .
        - from: LICENSE
          to: .
      bin: kubectl-manifest-clean
    - selector:
        matchLabels:
          os: windows
          arch: amd64
      uri: https://github.com/amdadulbari/kubectl-manifest-clean/releases/download/v1.0.0/kubectl-manifest-clean_v1.0.0_windows_amd64.zip
      sha256: 7c24a9d59a7c8c5ca45729c33cbf4bfcc3d0974c347a247c4b0b9d20377c17d2
      files:
        - from: kubectl-manifest-clean.exe
          to: .
        - from: LICENSE
          to: .
      bin: kubectl-manifest-clean.exe
